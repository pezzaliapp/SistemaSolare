<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sistema Solare — pezzaliAPP</title>
<style>
:root{
  --bg:#050a1e; --bg2:#0a1233; --ink:#eaf1ff; --muted:#99add6;
  --line:#1b2a66; --accent:#8b5cf6; --glow:#2dd4bf;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; font:15px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--ink);
  background: radial-gradient(1200px 600px at 50% -20%, #121b46 15%, transparent 60%),
              linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
}
header{
  position:sticky; top:0; z-index:10;
  background:#081133cc; backdrop-filter:blur(8px);
  border-bottom:1px solid var(--line);
}
.header-inner{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:10px 12px; position:relative;
}
h1{
  margin:0; font-size:16px; letter-spacing:.3px; white-space:nowrap;
  background:linear-gradient(90deg,#c9d6ff,#a3eeda,#c9d6ff);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  animation:titleflow 10s linear infinite;
}
@keyframes titleflow{0%{background-position:0% 50%}100%{background-position:200% 50%}}
.badge{
  display:inline-block; margin-left:8px; padding:2px 8px; border-radius:999px;
  background:#14204e; color:#a7b7ef; font:700 11px/1 ui-monospace; box-shadow:0 0 0 1px #24357a inset;
}
canvas{display:block; width:100%; height:auto}
.hud{
  position:absolute; left:10px; top:10px; font:12px/1.25 ui-monospace, Menlo, Consolas, monospace;
  color:#cfe2ff; text-shadow:0 1px 0 #000;
  background:#0a0f2acc; padding:8px 10px; border-radius:10px; border:1px solid #1a2355;
  box-shadow:0 0 0 1px rgba(45,212,191,.2), 0 0 20px rgba(45,212,191,.08);
}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <h1>Sistema Solare — pezzaliAPP <span class="badge">standalone</span></h1>
    <div class="small">8 pianeti · Orbite inclinate · Rotazione · Scala visiva</div>
  </div>
</header>

<main style="max-width:1100px; margin:0 auto; padding:14px">
  <section class="canvas-wrap" style="position:relative; border:1px solid var(--line); border-radius:18px; overflow:hidden; background:#0a0f2a; box-shadow:0 30px 60px rgba(0,0,0,.35)">
    <canvas id="view" width="960" height="540"></canvas>
    <div class="hud" id="hud">Caricamento…</div>
  </section>
</main>

<script src="https://unpkg.com/three@0.160.1/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.1/examples/js/controls/OrbitControls.js"></script>

<script>
(function(){
  'use strict';

  const canvas = document.getElementById('view');
  const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setSize(canvas.width, canvas.height);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(30, canvas.width / canvas.height, 1, 10000);
  camera.position.set(0, 100, 300);

  const controls = new THREE.OrbitControls(camera, canvas);
  controls.enableDamping = true;
  controls.dampingFactor = 0.05;

  // Luce solare
  const sunLight = new THREE.PointLight(0xffffff, 2, 1000);
  scene.add(sunLight);
  scene.add(new THREE.AmbientLight(0x111122));

  // Scala visiva (non reale, ma riconoscibile)
  const DIST_SCALE = 0.8;   // distanza
  const SIZE_SCALE = 0.03;  // dimensione

  // Dati pianeti: [nome, raggio, distanza, colore, periodo orbitale (giorni), inclinazione]
  const planets = [
    ["Mercurio", 2.4, 20, 0x8a7f70, 88, 7],
    ["Venere",   6.0, 35, 0xe39e1c, 225, 3.4],
    ["Terra",    6.4, 50, 0x6b93d6, 365, 0],
    ["Marte",    3.4, 70, 0xc1440e, 687, 1.9],
    ["Giove",   70,  100, 0xd8ca9d, 4333, 1.3],
    ["Saturno", 60,  140, 0xe3e0c0, 10759, 2.5],
    ["Urano",   25,  180, 0x4fd0e7, 30687, 0.8],
    ["Nettuno", 24,  220, 0x5b73d6, 60190, 1.8]
  ];

  // Sole
  const sunGeo = new THREE.SphereGeometry(15, 32, 32);
  const sunMat = new THREE.MeshBasicMaterial({ color: 0xffff00 });
  const sun = new THREE.Mesh(sunGeo, sunMat);
  scene.add(sun);

  const planetObjects = [];

  planets.forEach(([name, radius, distance, color, period, incl]) => {
    const group = new THREE.Group();
    group.rotation.x = THREE.MathUtils.degToRad(incl);
    
    const geo = new THREE.SphereGeometry(radius * SIZE_SCALE, 24, 24);
    const mat = new THREE.MeshPhongMaterial({ color });
    const mesh = new THREE.Mesh(geo, mat);
    mesh.position.x = distance * DIST_SCALE;
    group.add(mesh);
    
    // Anelli Saturno
    if (name === "Saturno") {
      const ringGeo = new THREE.RingGeometry(radius * SIZE_SCALE * 1.5, radius * SIZE_SCALE * 2.5, 32);
      const ringMat = new THREE.MeshBasicMaterial({ 
        color: 0xe3e0c0, 
        side: THREE.DoubleSide,
        transparent: true,
        opacity: 0.7
      });
      const ring = new THREE.Mesh(ringGeo, ringMat);
      ring.rotation.x = Math.PI / 2;
      mesh.add(ring);
    }

    scene.add(group);
    planetObjects.push({ mesh, group, distance: distance * DIST_SCALE, period, rotationSpeed: 0.02 });
  });

  // HUD
  const hud = document.getElementById('hud');

  // Animazione
  const clock = new THREE.Clock();
  function animate() {
    requestAnimationFrame(animate);
    
    const t = clock.getElapsedTime();
    
    sun.rotation.y += 0.001;
    
    let info = `t=${(t/86400).toFixed(2)} giorni solari | `;
    planetObjects.forEach((p, i) => {
      const angle = (t / p.period) * Math.PI * 2;
      p.mesh.position.x = Math.cos(angle) * p.distance;
      p.mesh.position.z = Math.sin(angle) * p.distance;
      p.mesh.rotation.y += p.rotationSpeed;
      if (i < 3) info += `${planets[i][0]}: ${(angle * 180 / Math.PI).toFixed(0)}° `;
    });
    hud.textContent = info;

    controls.update();
    renderer.render(scene, camera);
  }
  animate();

  // Resize
  window.addEventListener('resize', () => {
    const rect = canvas.getBoundingClientRect();
    renderer.setSize(rect.width, rect.height);
    camera.aspect = rect.width / rect.height;
    camera.updateProjectionMatrix();
  });
})();
</script>
</body>
</html>
